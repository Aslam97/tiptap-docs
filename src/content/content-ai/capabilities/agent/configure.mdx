---
title: Configure AI Agent
meta:
  title: Configure AI Agent | Tiptap Content AI
  description: Learn how to configure the AI Agent extension for Tiptap.
  category: Content AI
---

The AI Agent provider can be configured with various options to customize its behavior. Here are the key configuration options:

```tsx
import { AiAgent, AiAgentProvider } from '@tiptap-pro/extension-ai-agent'

const provider = new AiAgentProvider({
  // Required: Authentication credentials for Tiptap Cloud
  appId: 'YOUR_APP_ID',
  token: 'YOUR_JWT_TOKEN',

  // Optional: Initial chat messages to populate the conversation
  initialChatMessages: [],

  // Optional: The OpenAI model to use for the AI Agent
  // Recommended models are gpt-4.1 and gpt-4o as they work best with the AI Agent
  // The model needs to support tool calling
  modelName: 'gpt-4.1', // default

  // Optional: Controls automatic acceptance of AI changes
  // - "always": Automatically accepts all tool calls
  // - "never": Never automatically accepts tool calls
  // - "onlyRead": Automatically accepts tool calls that don't modify content
  autoAccept: 'onlyRead', // default

  // Optional: Automatically save checkpoints when user sends a message
  autoSaveCheckpoints: false, // default

  // Optional: Size of document chunks when reading (in characters)
  chunkSize: 1000, // default

  // Optional: Whether to use the AI Changes extension for tracking changes
  useAiChangesExtension: true, // default

  // Optional: Event handlers
  onStateChange: (newState, previousState, context) => {
    // Handle state changes
  },
  onLoadingError: (error, context) => {
    // Handle loading errors
  },
  onBeforeToolCall: (toolCall, context) => {
    // Handle before tool call
  },
  onAfterToolCall: (toolCall, context) => {
    // Handle tool call
  },
  onRunFinished: (context) => {
    // Handle run finished
  },
})
```

## Key configuration options

| Option                  | Type                              | Default    | Description                                              |
| ----------------------- | --------------------------------- | ---------- | -------------------------------------------------------- |
| `appId`                 | string                            | ""         | Your Tiptap Content AI app ID                            |
| `token`                 | string                            | ""         | JWT token for authentication                             |
| `modelName`             | AiAgentModelName                  | "gpt-4.1"  | The OpenAI model to use (gpt-4.1 and gpt-4o recommended) |
| `autoAccept`            | "always" \| "never" \| "onlyRead" | "onlyRead" | Controls automatic acceptance of AI changes              |
| `autoSaveCheckpoints`   | boolean                           | false      | Automatically save checkpoints when user sends a message |
| `chunkSize`             | number                            | 1000       | Size of document chunks when reading (in characters)     |
| `useAiChangesExtension` | boolean                           | true       | Whether to use the AI Changes extension                  |
| `initialChatMessages`   | ChatMessage[]                     | []         | Initial chat messages to populate the conversation       |

## Example: Basic configuration

```tsx
const provider = new AiAgentProvider({
  appId: 'YOUR_APP_ID',
  token: 'YOUR_JWT_TOKEN',
})

const editor = new Editor({
  extensions: [
    StarterKit,
    AiAgent.configure({
      provider,
    }),
  ],
})
```

## Example: Advanced configuration

```tsx
const provider = new AiAgentProvider({
  appId: 'YOUR_APP_ID',
  token: 'YOUR_JWT_TOKEN',
  modelName: 'gpt-4o',
  autoAccept: 'never',
  autoSaveCheckpoints: true,
  chunkSize: 2000,
  initialChatMessages: [
    {
      type: 'ai',
      text: 'Hello! I am your AI assistant. How can I help you with your document today?',
    },
  ],
  onStateChange: (newState) => {
    console.log('State changed:', newState)
    updateUI(newState)
  },
})

const editor = new Editor({
  extensions: [
    StarterKit,
    AiAgent.configure({
      provider,
    }),
    AiChanges,
  ],
})
```
