---
title: Manage Checkpoints
meta:
  title: Manage Checkpoints | Tiptap Content AI
  description: Learn how to manage checkpoints in the AI Agent.
  category: Content AI
---

Checkpoints are snapshots of the editor's content and conversation state at a specific point in time. They allow you to save the current state of the document and conversation, and restore it later if needed.

## Setting a checkpoint

To create a checkpoint, use the `setCheckpoint()` method:

```tsx
const checkpointMessage = provider.setCheckpoint()
```

This method returns a checkpoint message that includes the current chat messages and editor content.

## Restoring a checkpoint

To restore a previously saved checkpoint, use the `restoreCheckpoint()` method:

```tsx
provider.restoreCheckpoint(checkpointMessage.checkpoint)
```

This will revert the editor content and conversation messages to the point when the checkpoint was created.

## Automatic checkpoints

You can configure the provider to automatically save checkpoints when the user sends a message:

```tsx
const provider = new AiAgentProvider({
  // ...other options
  autoSaveCheckpoints: true,
})
```

This can be useful for implementing an automatic undo history for user actions.

## Example: Creating an undo/redo system

```tsx
// Store checkpoints in an array
const checkpoints = []
let currentCheckpointIndex = -1

// Create a new checkpoint
const createCheckpoint = () => {
  const checkpoint = provider.setCheckpoint()

  // Remove any checkpoints after the current index (if we've gone back)
  if (currentCheckpointIndex < checkpoints.length - 1) {
    checkpoints.splice(currentCheckpointIndex + 1)
  }

  // Add the new checkpoint
  checkpoints.push(checkpoint)
  currentCheckpointIndex = checkpoints.length - 1
}

// Go back to previous checkpoint
const undoToCheckpoint = () => {
  if (currentCheckpointIndex > 0) {
    currentCheckpointIndex--
    provider.restoreCheckpoint(checkpoints[currentCheckpointIndex].checkpoint)
  }
}

// Go forward to next checkpoint
const redoToCheckpoint = () => {
  if (currentCheckpointIndex < checkpoints.length - 1) {
    currentCheckpointIndex++
    provider.restoreCheckpoint(checkpoints[currentCheckpointIndex].checkpoint)
  }
}
```
