---
title: Listen to AI Agent Events
meta:
  title: Listen to AI Agent Events | Tiptap Content AI
  description: Learn how to listen to events from the AI Agent in Tiptap.
  category: Content AI
---

The AI Agent provider emits events that you can subscribe to in order to respond to changes in the agent's state or behavior. These events allow you to build reactive UIs and implement custom logic.

## Available events

| Event            | Description                                   | Parameters                           |
| ---------------- | --------------------------------------------- | ------------------------------------ |
| `stateChange`    | Triggered when the provider state changes     | `(newState, previousState, context)` |
| `loadingError`   | Triggered when an error occurs during loading | `(error, context)`                   |
| `beforeToolCall` | Triggered before a tool call is executed      | `(toolCall, context)`                |
| `afterToolCall`  | Triggered after a tool call is executed       | `(toolCall, context)`                |
| `runFinished`    | Triggered when an AI Agent run is completed   | `(context)`                          |

## Subscribing to events

You can subscribe to events using the `on` method and unsubscribe using the `off` method:

```tsx
// Define event handlers
const handleStateChange = (newState, previousState, context) => {
  console.log('State changed:', newState)
  // Update UI based on new state
}

const handleToolCall = (toolCall, context) => {
  console.log('Tool called:', toolCall.id)
  // Perform custom actions based on the tool call
}

// Subscribe to events
provider.on('stateChange', handleStateChange)
provider.on('afterToolCall', handleToolCall)

// Later, unsubscribe when no longer needed
provider.off('stateChange', handleStateChange)
provider.off('afterToolCall', handleToolCall)
```

## Example: Updating UI based on state changes

```tsx
// Subscribe to state changes to update UI
provider.on('stateChange', (newState, previousState, context) => {
  // Show loading indicator when status changes to "loading"
  if (newState.status === 'loading' && previousState.status !== 'loading') {
    showLoadingIndicator()
  }

  // Hide loading indicator when status is no longer "loading"
  if (newState.status !== 'loading' && previousState.status === 'loading') {
    hideLoadingIndicator()
  }

  // Show review UI when status changes to "reviewingToolCall"
  if (newState.status === 'reviewingToolCall') {
    showReviewUI()
  }

  // Update chat messages display
  updateChatMessagesUI(newState.chatMessages)
})
```

## Example: Handling errors

```tsx
// Subscribe to loading errors
provider.on('loadingError', (error, context) => {
  console.error('AI Agent error:', error)
  showErrorNotification('An error occurred while processing your request')
})
```
